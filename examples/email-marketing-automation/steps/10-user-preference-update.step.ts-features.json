[
  {
    "id": "api-configuration",
    "title": "API Endpoint Configuration",
    "description": "PUT endpoint at /users/:userId/preferences for updating user email preferences with comprehensive validation and compliance tracking.",
    "lines": ["40-80"]
  },
  {
    "id": "preference-validation",
    "title": "Preference Validation",
    "description": "Validates unsubscribe tokens and preference updates with proper security checks and user authentication.",
    "lines": ["119-136"]
  },
  {
    "id": "change-tracking",
    "title": "Preference Change Tracking",
    "description": "Tracks all preference changes with detailed logging, IP addresses, and user agents for compliance and audit purposes.",
    "lines": ["138-232"]
  },
  {
    "id": "unsubscribe-handling",
    "title": "Unsubscribe Processing",
    "description": "Handles unsubscribe requests with proper user segmentation updates and cancellation of active email sequences.",
    "lines": ["261-267", "435-501"]
  },
  {
    "id": "compliance-logging",
    "title": "Compliance and Audit Logging",
    "description": "Logs all preference changes for GDPR, CAN-SPAM compliance with detailed audit trails and legal requirements.",
    "lines": ["284-301"]
  },
  {
    "id": "segmentation-updates",
    "title": "User Segmentation Updates",
    "description": "Updates user segmentation counters and email marketing status when preferences change to maintain accurate targeting.",
    "lines": ["251-259", "390-433"]
  }
]
