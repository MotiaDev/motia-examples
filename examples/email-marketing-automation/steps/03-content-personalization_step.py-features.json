[
  {
    "id": "event-configuration",
    "title": "Event Step Configuration",
    "description": "Python event step that subscribes to 'users-segmented' and emits 'content-personalized' for AI-powered content personalization with Appwrite Storage integration.",
    "lines": ["8-37"]
  },
  {
    "id": "template-storage",
    "title": "Appwrite Storage Integration",
    "description": "Fetches email templates from Appwrite Storage with fallback mechanisms and template mapping for different campaign types.",
    "lines": ["54-58", "143-186"]
  },
  {
    "id": "personalization-logic",
    "title": "Content Personalization Logic",
    "description": "Core personalization logic that processes each recipient and applies AI-powered or basic personalization based on user preferences and template content.",
    "lines": ["62-104"]
  },
  {
    "id": "ai-personalization",
    "title": "AI-Powered Personalization",
    "description": "Advanced AI personalization using OpenAI API for subject lines and content with sophisticated user context preparation and fallback mechanisms.",
    "lines": ["189-228", "230-279", "282-311"]
  },
  {
    "id": "state-storage",
    "title": "Personalized Content Storage",
    "description": "Stores personalized emails in Motia state and emits event to continue the email automation workflow.",
    "lines": ["106-107", "114-124"]
  },
  {
    "id": "user-segmentation",
    "title": "User Segmentation Logic",
    "description": "Helper functions to determine user engagement levels and new user status for targeted personalization strategies.",
    "lines": ["314-328", "331-344", "447-456"]
  }
]
